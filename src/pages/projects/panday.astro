---
import Layout from '@/layouts/Layout.astro';
import { contacts } from '@/lib/data';

// Project Data
const project = {
	title: "Panday",
	tagline: "AI-driven career roadmap platform with real-time distributed architecture",
	role: "Technical Lead",
	team: "4 developers, 4 designers",
	duration: "4 months",
	year: "2025",
	liveUrl: "https://panday.app",
	githubUrl: "https://github.com/panday-team/panday",
	techStack: [
		"Next.js 15",
		"React 19",
		"Go",
		"PostgreSQL",
		"pgvector",
		"Redis Streams",
		"D3.js",
		"React Flow",
		"Vitest"
	],
	images: [
		"/projects/panday-1.png",
		"/projects/panday-2.png"
	]
};

const story = {
	whatItIs:
		"Panday helps students figure out trade careers in BC without digging through a dozen government pages. It turns program requirements into an interactive roadmap people can actually follow.",
	whatIBuilt:
		"I was the technical lead on a team of 4 developers and 4 designers. I built core backend pieces in Go and Next.js, including the reverse proxy that kept local development and production behavior consistent. I also helped ship the AI assistant and made sure we had test coverage and CI in place as the codebase grew.",
	whyItMatters:
		"For students, this saves a lot of confusion and dead ends. For schools and program partners, it makes pathways easier to understand and easier to update as requirements change.",
};

const buildNarrative = [
	"The main product challenge was turning dense, scattered program requirements into something students could actually use. I helped shape the roadmap experience so people could move from 'what do I do next?' to a concrete plan in minutes.",
	"On the engineering side, I built backend pieces in Go and Next.js and focused on reliability as the project scaled. One key part was a reverse proxy layer that kept local development and production behavior aligned, which reduced surprise bugs and sped up iteration for the team.",
	"I also worked on the AI assistant flow so answers came from official BC documentation rather than generic responses. We paired that with tests and CI checks so contributors could ship quickly while still catching regressions early.",
	"The result was a product that was easier for students to trust and easier for the team to maintain. It gave users clearer decisions while giving us a safer path to keep shipping updates.",
];
---

<Layout title={`${project.title} | Nikita Lobanov`} description={story.whatItIs}>
	<div class="min-h-screen bg-background relative">
		<!-- Ambient background glows -->
		<div class='ambient-glow'></div>
		<div class='ambient-glow-2'></div>

		<!-- Navigation -->
		<nav class="sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
			<div class="mx-auto max-w-5xl px-6 py-4">
				<div class="flex items-center justify-between">
					<a href="/" class="link-slide-green">~/ back</a>
					<div class="flex items-center gap-6 text-sm">
						{project.liveUrl && (
							<a href={project.liveUrl} target="_blank" rel="noreferrer" class="link-slide-green">
								live site
							</a>
						)}
						{project.githubUrl && (
							<a href={project.githubUrl} target="_blank" rel="noreferrer" class="link-slide-green">
								github
							</a>
						)}
					</div>
				</div>
			</div>
		</nav>

		<main class="mx-auto max-w-5xl px-6 py-12">
			<!-- Hero Section -->
			<section class="mb-16">
				<div class="flex items-center gap-2 text-muted-foreground mb-4">
					<span class="text-primary">~/projects/{project.title.toLowerCase()}</span>
				</div>
				
				<h1 class="text-3xl md:text-4xl text-foreground mb-3">{project.title}</h1>
				<p class="text-lg text-muted-foreground mb-6">{project.tagline}</p>
				
				<!-- Project Meta -->
				<div class="flex flex-wrap gap-x-6 gap-y-2 text-sm text-muted-foreground mb-8">
					<span><span class="text-muted-foreground/60">#</span> Role: {project.role}</span>
					<span><span class="text-muted-foreground/60">#</span> Team: {project.team}</span>
					<span><span class="text-muted-foreground/60">#</span> Duration: {project.duration}</span>
					<span><span class="text-muted-foreground/60">#</span> Year: {project.year}</span>
				</div>

				<!-- Tech Stack -->
				<div class="flex flex-wrap gap-2 mb-8">
					{project.techStack.map((tech) => (
						<span class="text-xs px-2 py-1 bg-muted rounded text-muted-foreground">
							{tech}
						</span>
					))}
				</div>

				<!-- Links -->
				<div class="flex flex-wrap gap-4 mb-8">
					{project.liveUrl && (
						<a 
							href={project.liveUrl} 
							target="_blank" 
							rel="noreferrer"
							class="inline-flex items-center gap-2 px-4 py-2 border border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-colors rounded"
						>
							<span>Try it</span>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
							</svg>
						</a>
					)}
					{project.githubUrl && (
						<a 
							href={project.githubUrl} 
							target="_blank" 
							rel="noreferrer"
							class="inline-flex items-center gap-2 px-4 py-2 border border-border text-muted-foreground hover:text-foreground hover:border-foreground transition-colors rounded"
						>
							<span>Source</span>
							<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
								<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
							</svg>
						</a>
					)}
				</div>

				<!-- Hero Image -->
				{project.images[0] && (
					<div class="relative rounded border border-border overflow-hidden bg-card">
						<img 
							src={project.images[0]} 
							alt={`${project.title} main screenshot`}
							class="w-full h-auto"
						/>
					</div>
				)}
			</section>

			<section class="mb-16">
				<div class="flex items-center gap-2 text-muted-foreground mb-6">
					<span class="text-primary">~/build-details</span>
				</div>
				<div class="space-y-5">
					{buildNarrative.map((paragraph) => (
						<p class="text-muted-foreground leading-relaxed max-w-4xl">{paragraph}</p>
					))}
				</div>
			</section>

			<!-- Project Story -->
			<section class="mb-16">
				<div class="flex items-center gap-2 text-muted-foreground mb-6">
					<span class="text-primary">~/project-story</span>
				</div>

				<div class="space-y-6">
					<!-- Problem/Context -->
					<div class="border-l-2 border-border pl-4 py-2">
						<p class="text-foreground/90 leading-relaxed">
							{story.whatItIs}
						</p>
					</div>

					<!-- Challenge -->
					<div class="border-l-2 border-border pl-4 py-2">
						<p class="text-foreground/90 leading-relaxed">
							{story.whatIBuilt}
						</p>
					</div>

					<!-- Solution -->
					<div class="border-l-2 border-primary pl-4 py-2">
						<p class="text-foreground/90 leading-relaxed">
							{story.whyItMatters}
						</p>
					</div>
				</div>
			</section>

			<!-- Additional Screenshots -->
			{project.images.length > 1 && (
				<section class="mb-16">
					<div class="flex items-center gap-2 text-muted-foreground mb-6">
						<span class="text-primary">~/screenshots</span>
					</div>

					<div class="grid md:grid-cols-2 gap-4">
						{project.images.slice(1).map((image, index) => (
							<div class="relative rounded border border-border overflow-hidden bg-card">
								<img 
									src={image} 
									alt={`${project.title} screenshot ${index + 2}`}
									class="w-full h-auto"
								/>
							</div>
						))}
					</div>
				</section>
			)}

			<!-- Footer Navigation -->
			<footer class="border-t border-border pt-8">
				<div class="flex items-center justify-between">
					<a href="/" class="link-slide-green">~/ back to portfolio</a>
					<div class="flex items-center gap-6 text-sm">
						<a href={contacts.github} target="_blank" rel="noreferrer" class="link-slide-green">
							github
						</a>
						<a href={contacts.linkedin} target="_blank" rel="noreferrer" class="link-slide-green">
							linkedin
						</a>
						<a href={`mailto:${contacts.email}`} class="link-slide-green">
							email
						</a>
					</div>
				</div>
			</footer>
		</main>
	</div>
</Layout>

<style>
	html {
		scroll-behavior: smooth;
	}
</style>
