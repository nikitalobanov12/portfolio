---
import Layout from '@/layouts/Layout.astro';
import { FadeIn } from '@/components/motion/FadeIn.tsx';
import { getCollection } from 'astro:content';
import { intro } from '@/lib/data';

const posts = await getCollection('notes');
---
<Layout title='Notes Â· Nikita Lobanov' description='Build logs and notes on Go, TypeScript, tooling, and lessons from production.'>
	<!-- Top Navigation -->
	<nav class='sticky top-0 z-50 border-b border-border/40 bg-background/95 backdrop-blur'>
		<div class='mx-auto max-w-3xl px-6 py-4'>
			<div class='flex items-center justify-between'>
				<a href='/' class='font-medium text-foreground transition-colors hover:text-muted-foreground'>{intro.name}</a>
				<a href='/notes' class='text-sm text-muted-foreground transition-colors hover:text-foreground'>notes</a>
			</div>
		</div>
	</nav>
	<main class='min-h-screen bg-background'>
		<div class='mx-auto max-w-3xl px-6 py-16 md:py-24'>
			<section id='notes' class='mb-20'>
				<h2 class='mb-6 text-sm font-medium uppercase tracking-wider text-muted-foreground'>notes</h2>
				<div class='space-y-4'>
					{posts.length === 0 ? (
						<p class='rounded-md border border-border/50 p-5 text-sm text-muted-foreground'>No posts yet.</p>
					) : (
						posts
							.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
							.map((post) => (
								<a
									href={`/notes/${post.slug}/`}
									class='block rounded-md border border-border/50 p-5 transition-all hover:border-border'
								>
									<div class='space-y-2'>
										<div class='flex items-center gap-3'>
											<h3 class='font-medium text-foreground'>{post.data.title}</h3>
											<span class='text-xs text-muted-foreground/70'>{post.data.publishDate.toLocaleDateString()}</span>
										</div>
										<p class='text-sm text-muted-foreground leading-relaxed'>{post.data.description}</p>
										{post.data.tags && (
											<div class='flex flex-wrap gap-2 pt-1'>
												{post.data.tags.map(tag => (
													<span key={tag} class='text-xs text-muted-foreground/70'>#{tag}</span>
												))}
											</div>
										)}
									</div>
								</a>
							))
					)}
				</div>
			</section>
		</div>
	</main>
</Layout>
